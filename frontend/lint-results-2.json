[{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\components\\ChatWindow.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nE:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\components\\ChatWindow.tsx:53:9\n  51 |         });\n  52 |\n> 53 |         setSocket(newSocket);\n     |         ^^^^^^^^^ Avoid calling setState() directly within an effect\n  54 |\n  55 |         // Load initial messages\n  56 |         fetchMessages();","line":53,"column":9,"nodeType":null,"endLine":53,"endColumn":18},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchMessages'. Either include it or remove the dependency array.","line":67,"column":8,"nodeType":"ArrayExpression","endLine":67,"endColumn":31,"suggestions":[{"desc":"Update the dependencies array to be: [conversationId, fetchMessages, token]","fix":{"range":[2045,2068],"text":"[conversationId, fetchMessages, token]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { io, Socket } from 'socket.io-client';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { Send, Mic, Phone, Video } from 'lucide-react';\r\nimport api from '../services/api';\r\n\r\ninterface Message {\r\n    _id: string;\r\n    content: string;\r\n    sender: {\r\n        _id: string;\r\n        name: string;\r\n        avatar?: string;\r\n    } | string; // string for 'bot'\r\n    type: string;\r\n    createdAt: string;\r\n    metadata?: any;\r\n}\r\n\r\ninterface ChatWindowProps {\r\n    conversationId: string;\r\n    onVideoCall?: () => void;\r\n}\r\n\r\nexport const ChatWindow: React.FC<ChatWindowProps> = ({ conversationId, onVideoCall }) => {\r\n    const [messages, setMessages] = useState<Message[]>([]);\r\n    const [newMessage, setNewMessage] = useState('');\r\n    const [socket, setSocket] = useState<Socket | null>(null);\r\n    const { user, token } = useAuth();\r\n    const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n    const scrollToBottom = () => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    };\r\n\r\n    const fetchMessages = async () => {\r\n        try {\r\n            const response = await api.get(`/chat/conversations/${conversationId}/messages`);\r\n            setMessages(response.data.reverse()); // Assuming API returns newest first\r\n            scrollToBottom();\r\n        } catch (error) {\r\n            console.error('Failed to fetch messages', error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        // Initialize Socket.IO\r\n        const newSocket = io('http://localhost:5000', {\r\n            auth: { token },\r\n            transports: ['websocket']\r\n        });\r\n\r\n        setSocket(newSocket);\r\n\r\n        // Load initial messages\r\n        fetchMessages();\r\n\r\n        // Socket event listeners\r\n        newSocket.on('chat:message', (message: Message) => {\r\n            setMessages(prev => [...prev, message]);\r\n            scrollToBottom();\r\n        });\r\n\r\n        return () => {\r\n            newSocket.disconnect();\r\n        };\r\n    }, [conversationId, token]);\r\n\r\n    const handleSendMessage = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!newMessage.trim() || !socket) return;\r\n\r\n        const messageData = {\r\n            conversationId,\r\n            message: newMessage,\r\n            type: 'text'\r\n        };\r\n\r\n        socket.emit('chat:message', messageData);\r\n        setNewMessage('');\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col h-full bg-white rounded-xl shadow-sm border border-slate-200\">\r\n            {/* Header */}\r\n            <div className=\"p-4 border-b border-slate-200 flex justify-between items-center\">\r\n                <h3 className=\"font-semibold text-slate-800\">Chat</h3>\r\n                <div className=\"flex space-x-2\">\r\n                    <button\r\n                        onClick={onVideoCall}\r\n                        className=\"p-2 hover:bg-slate-100 rounded-full text-slate-600 transition-colors\"\r\n                    >\r\n                        <Video className=\"h-5 w-5\" />\r\n                    </button>\r\n                    <button className=\"p-2 hover:bg-slate-100 rounded-full text-slate-600 transition-colors\">\r\n                        <Phone className=\"h-5 w-5\" />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Messages Area */}\r\n            <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n                {messages.map((msg) => {\r\n                    const isMe = msg.sender && typeof msg.sender === 'object' ? msg.sender._id === user?.id : false;\r\n                    const isBot = msg.sender === 'bot' || (msg.sender && typeof msg.sender === 'object' && msg.sender._id === 'bot');\r\n\r\n                    return (\r\n                        <div key={msg._id} className={`flex ${isMe ? 'justify-end' : 'justify-start'}`}>\r\n                            <div\r\n                                className={`max-w-[70%] rounded-2xl px-4 py-2 ${isMe\r\n                                    ? 'bg-blue-500 text-white rounded-br-none'\r\n                                    : isBot\r\n                                        ? 'bg-green-100 text-green-900 rounded-bl-none'\r\n                                        : 'bg-gray-100 text-gray-800 rounded-bl-none'\r\n                                    }`}\r\n                            >\r\n                                <p>{msg.content}</p>\r\n                                {msg.metadata?.suggestions && (\r\n                                    <div className=\"mt-2 flex flex-wrap gap-2\">\r\n                                        {msg.metadata.suggestions.map((suggestion: string, idx: number) => (\r\n                                            <button\r\n                                                key={idx}\r\n                                                onClick={() => setNewMessage(suggestion)}\r\n                                                className=\"text-xs bg-white/50 hover:bg-white/80 px-2 py-1 rounded-full transition-colors\"\r\n                                            >\r\n                                                {suggestion}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })}\r\n                <div ref={messagesEndRef} />\r\n            </div>\r\n\r\n            {/* Input Area */}\r\n            <form onSubmit={handleSendMessage} className=\"p-4 border-t border-slate-200 flex space-x-2\">\r\n                <button type=\"button\" className=\"p-2 hover:bg-slate-100 rounded-full text-slate-500\">\r\n                    <Mic className=\"h-5 w-5\" />\r\n                </button>\r\n                <input\r\n                    type=\"text\"\r\n                    value={newMessage}\r\n                    onChange={(e) => setNewMessage(e.target.value)}\r\n                    placeholder=\"Type a message...\"\r\n                    className=\"flex-1 px-4 py-2 border border-slate-300 rounded-full focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n                />\r\n                <button\r\n                    type=\"submit\"\r\n                    disabled={!newMessage.trim()}\r\n                    className=\"p-2 bg-primary-600 text-white rounded-full hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                >\r\n                    <Send className=\"h-5 w-5\" />\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\components\\CrisisInterventionModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\components\\ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\components\\FloatingChatWidget.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'conversationId'. Either include it or remove the dependency array.","line":37,"column":8,"nodeType":"ArrayExpression","endLine":37,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [conversationId, isOpen]","fix":{"range":[1225,1233],"text":"[conversationId, isOpen]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { MessageCircle, X, Send, Minimize2, Maximize2, Bot } from 'lucide-react';\r\nimport api from '../services/api';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\ninterface Message {\r\n    _id: string;\r\n    content: string;\r\n    sender: { _id: string; name: string };\r\n    createdAt: string;\r\n}\r\n\r\nexport const FloatingChatWidget: React.FC = () => {\r\n    const { user } = useAuth();\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [isExpanded, setIsExpanded] = useState(false);\r\n    const [messages, setMessages] = useState<Message[]>([]);\r\n    const [newMessage, setNewMessage] = useState('');\r\n    const [conversationId, setConversationId] = useState<string | null>(null);\r\n    const [isTyping, setIsTyping] = useState(false);\r\n\r\n    // Auto-scroll ref\r\n    const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n    const scrollToBottom = () => {\r\n        messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n    };\r\n\r\n    useEffect(() => {\r\n        scrollToBottom();\r\n    }, [messages, isTyping, isOpen]);\r\n\r\n    useEffect(() => {\r\n        if (isOpen && !conversationId) {\r\n            initializeBotChat();\r\n        }\r\n    }, [isOpen]);\r\n\r\n    const initializeBotChat = async () => {\r\n        try {\r\n            // Check for existing bot conversation or create one\r\n            const response = await api.post('/chat/conversations', {\r\n                participants: ['bot'],\r\n                type: 'direct'\r\n            });\r\n            setConversationId(response.data._id);\r\n            // Fetch recent messages\r\n            if (response.data._id) {\r\n                const msgResponse = await api.get(`/chat/conversations/${response.data._id}/messages`);\r\n                // Backend returns Newest First, we want Oldest First (Chronological)\r\n                setMessages(msgResponse.data.reverse());\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to init bot chat', error);\r\n        }\r\n    };\r\n\r\n    const handleSendMessage = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!newMessage.trim() || !conversationId) return;\r\n\r\n        try {\r\n            const content = newMessage;\r\n            setNewMessage('');\r\n\r\n            // Optimistic update\r\n            const tempMsg: Message = {\r\n                _id: Date.now().toString(),\r\n                content,\r\n                sender: { _id: (user as any)?._id || 'me', name: user?.name || 'Me' },\r\n                createdAt: new Date().toISOString()\r\n            };\r\n            setMessages(prev => [...prev, tempMsg]);\r\n            setIsTyping(true); // Start typing indicator\r\n\r\n            await api.post(`/chat/conversations/${conversationId}/messages`, { content });\r\n\r\n            // Poll for bot response (attempt every 2s for 30s)\r\n            let attempts = 0;\r\n            const maxAttempts = 15;\r\n\r\n            const pollInterval = setInterval(async () => {\r\n                attempts++;\r\n                try {\r\n                    const msgResponse = await api.get(`/chat/conversations/${conversationId}/messages`);\r\n                    // Reverse to get Chronological order\r\n                    const newMessages = msgResponse.data.reverse();\r\n\r\n                    // Check if there's a new message from the bot\r\n                    // Last message in chronological list should be the newest\r\n                    const lastMsg = newMessages[newMessages.length - 1];\r\n\r\n                    // Safe check for sender (bot has no sender or sender is null)\r\n                    const isBot = !lastMsg.sender || lastMsg.sender === null;\r\n                    const isOtherUser = lastMsg.sender?._id !== (user as any)?._id && lastMsg.sender?._id !== 'me';\r\n\r\n                    if (lastMsg && (isBot || isOtherUser)) {\r\n                        setMessages(newMessages);\r\n                        setIsTyping(false); // Stop typing indicator\r\n                        clearInterval(pollInterval);\r\n                    } else if (attempts >= maxAttempts) {\r\n                        setIsTyping(false); // Stop typing indicator on timeout\r\n                        clearInterval(pollInterval);\r\n                    }\r\n                } catch (err) {\r\n                    console.error('Polling error', err);\r\n                }\r\n            }, 2000);\r\n\r\n        } catch (error) {\r\n            console.error('Failed to send message', error);\r\n        }\r\n    };\r\n\r\n    if (!isOpen) {\r\n        return (\r\n            <button\r\n                onClick={() => setIsOpen(true)}\r\n                className=\"fixed bottom-6 right-6 w-14 h-14 bg-indigo-600 text-white rounded-full shadow-lg hover:bg-indigo-700 transition-all flex items-center justify-center z-50 hover:scale-110\"\r\n            >\r\n                <MessageCircle className=\"w-8 h-8\" />\r\n            </button>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className={`fixed bottom-6 right-6 bg-white rounded-2xl shadow-2xl border border-slate-200 flex flex-col z-50 transition-all duration-300 ${isExpanded ? 'w-96 h-[600px]' : 'w-80 h-[500px]'}`}>\r\n            {/* Header */}\r\n            <div className=\"p-4 bg-indigo-600 text-white rounded-t-2xl flex justify-between items-center shadow-md\">\r\n                <div className=\"flex items-center gap-2\">\r\n                    <div className=\"relative\">\r\n                        <Bot className=\"w-6 h-6\" />\r\n                        <div className=\"absolute -bottom-1 -right-1 w-2.5 h-2.5 bg-green-400 rounded-full border-2 border-indigo-600 animate-pulse\" />\r\n                    </div>\r\n                    <span className=\"font-bold\">Mindora</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                    <button onClick={() => setIsExpanded(!isExpanded)} className=\"p-1 hover:bg-indigo-500 rounded transition-colors\">\r\n                        {isExpanded ? <Minimize2 className=\"w-4 h-4\" /> : <Maximize2 className=\"w-4 h-4\" />}\r\n                    </button>\r\n                    <button onClick={() => setIsOpen(false)} className=\"p-1 hover:bg-indigo-500 rounded transition-colors\">\r\n                        <X className=\"w-5 h-5\" />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Messages */}\r\n            <div className=\"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50 scrollbar-thin scrollbar-thumb-slate-200\">\r\n                {messages.map((msg) => {\r\n                    const isMe = msg.sender?._id === (user as any)?._id || msg.sender?._id === 'me';\r\n                    return (\r\n                        <div key={msg._id} className={`flex ${isMe ? 'justify-end' : 'justify-start'}`}>\r\n                            {!isMe && (\r\n                                <div className=\"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center mr-2 self-end mb-1\">\r\n                                    <Bot className=\"w-5 h-5 text-green-600\" />\r\n                                </div>\r\n                            )}\r\n                            <div className={`max-w-[75%] p-3.5 rounded-2xl text-sm shadow-sm leading-relaxed ${isMe\r\n                                ? 'bg-blue-500 text-white rounded-tr-none'\r\n                                : 'bg-green-100 text-green-900 rounded-tl-none'\r\n                                }`}>\r\n                                {msg.content}\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })}\r\n                {isTyping && (\r\n                    <div className=\"flex justify-start items-end\">\r\n                        <div className=\"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center mr-2 mb-1\">\r\n                            <Bot className=\"w-5 h-5 text-green-600\" />\r\n                        </div>\r\n                        <div className=\"bg-green-100 text-green-900 border border-green-200 p-4 rounded-2xl rounded-tl-none shadow-sm flex items-center space-x-1.5 h-12\">\r\n                            <div className=\"w-1.5 h-1.5 bg-green-400 rounded-full animate-bounce\" style={{ animationDelay: '0ms' }} />\r\n                            <div className=\"w-1.5 h-1.5 bg-green-400 rounded-full animate-bounce\" style={{ animationDelay: '150ms' }} />\r\n                            <div className=\"w-1.5 h-1.5 bg-green-400 rounded-full animate-bounce\" style={{ animationDelay: '300ms' }} />\r\n                        </div>\r\n                    </div>\r\n                )}\r\n                {messages.length === 0 && (\r\n                    <div className=\"flex flex-col items-center justify-center h-full text-center p-6 text-slate-500 space-y-3 opacity-60\">\r\n                        <Bot className=\"w-12 h-12 text-slate-300\" />\r\n                        <p className=\"text-sm\">Hi! I'm Mindora. I'm here to listen and support you. How are you feeling today?</p>\r\n                    </div>\r\n                )}\r\n                <div ref={messagesEndRef} />\r\n            </div>\r\n\r\n            {/* Input */}\r\n            <form onSubmit={handleSendMessage} className=\"p-3 border-t border-slate-100 bg-white rounded-b-2xl\">\r\n                <div className=\"flex gap-2\">\r\n                    <input\r\n                        type=\"text\"\r\n                        value={newMessage}\r\n                        onChange={(e) => setNewMessage(e.target.value)}\r\n                        placeholder=\"Type a message...\"\r\n                        className=\"flex-1 px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all placeholder:text-slate-400\"\r\n                    />\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={!newMessage.trim()}\r\n                        className=\"p-2.5 bg-indigo-600 text-white rounded-full hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform hover:scale-105 active:scale-95 shadow-sm\"\r\n                    >\r\n                        <Send className=\"w-5 h-5\" />\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\components\\PageTransition.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\components\\ScrollToTop.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\components\\TherapistDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\components\\TherapistList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\components\\TherapistProfile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\context\\AuthContext.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nE:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\context\\AuthContext.tsx:26:17\n  24 |             try {\n  25 |                 const user = JSON.parse(userStr);\n> 26 |                 setState({\n     |                 ^^^^^^^^ Avoid calling setState() directly within an effect\n  27 |                     user,\n  28 |                     token,\n  29 |                     isAuthenticated: true,","line":26,"column":17,"nodeType":null,"endLine":26,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":32,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":23},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":71,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":71,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport type { User, AuthState } from '../types';\r\n\r\ninterface AuthContextType extends AuthState {\r\n    login: (token: string, user: User) => void;\r\n    logout: () => void;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n    const [state, setState] = useState<AuthState>({\r\n        user: null,\r\n        token: null,\r\n        isAuthenticated: false,\r\n        isLoading: true,\r\n    });\r\n\r\n    useEffect(() => {\r\n        const token = localStorage.getItem('token');\r\n        const userStr = localStorage.getItem('user');\r\n\r\n        if (token && userStr) {\r\n            try {\r\n                const user = JSON.parse(userStr);\r\n                setState({\r\n                    user,\r\n                    token,\r\n                    isAuthenticated: true,\r\n                    isLoading: false,\r\n                });\r\n            } catch (e) {\r\n                localStorage.removeItem('token');\r\n                localStorage.removeItem('user');\r\n                setState(prev => ({ ...prev, isLoading: false }));\r\n            }\r\n        } else {\r\n            setState(prev => ({ ...prev, isLoading: false }));\r\n        }\r\n    }, []);\r\n\r\n    const login = (token: string, user: User) => {\r\n        localStorage.setItem('token', token);\r\n        localStorage.setItem('user', JSON.stringify(user));\r\n        setState({\r\n            user,\r\n            token,\r\n            isAuthenticated: true,\r\n            isLoading: false,\r\n        });\r\n    };\r\n\r\n    const logout = () => {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('user');\r\n        setState({\r\n            user: null,\r\n            token: null,\r\n            isAuthenticated: false,\r\n            isLoading: false,\r\n        });\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ ...state, login, logout }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useAuth = () => {\r\n    const context = useContext(AuthContext);\r\n    if (context === undefined) {\r\n        throw new Error('useAuth must be used within an AuthProvider');\r\n    }\r\n    return context;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\hooks\\useCrisisDetection.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is assigned a value but never used.","line":27,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":27,"endColumn":13},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nE:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\hooks\\useCrisisDetection.ts:55:9\n  53 |         });\n  54 |\n> 55 |         setSocket(newSocket);\n     |         ^^^^^^^^^ Avoid calling setState() directly within an effect\n  56 |\n  57 |         // Cleanup on unmount\n  58 |         return () => {","line":55,"column":9,"nodeType":null,"endLine":55,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { io, Socket } from 'socket.io-client';\r\n\r\ninterface CrisisDetection {\r\n    crisisLevel: number;\r\n    urgency: string;\r\n    keywords: string[];\r\n    sentiment: string;\r\n    recommendations: string[];\r\n}\r\n\r\ninterface UseCrisisDetectionReturn {\r\n    crisisLevel: number;\r\n    isCritical: boolean;\r\n    showModal: boolean;\r\n    detectedKeywords: string[];\r\n    dismissModal: () => void;\r\n}\r\n\r\nconst CRISIS_THRESHOLD = 8; // Show modal for crisis level >= 8\r\nconst SOCKET_URL = import.meta.env.VITE_API_URL?.replace('/api', '') || 'http://localhost:3001';\r\n\r\nexport const useCrisisDetection = (): UseCrisisDetectionReturn => {\r\n    const [crisisLevel, setCrisisLevel] = useState<number>(0);\r\n    const [detectedKeywords, setDetectedKeywords] = useState<string[]>([]);\r\n    const [showModal, setShowModal] = useState<boolean>(false);\r\n    const [_, setSocket] = useState<Socket | null>(null);\r\n\r\n    useEffect(() => {\r\n        // Initialize Socket.IO connection\r\n        const newSocket = io(SOCKET_URL, {\r\n            transports: ['websocket', 'polling'],\r\n            auth: {\r\n                token: localStorage.getItem('anonymousSessionToken') || localStorage.getItem('token'),\r\n            },\r\n        });\r\n\r\n        // Listen for crisis detection events from backend\r\n        newSocket.on('crisis:detected', (data: CrisisDetection) => {\r\n            console.log('Crisis detected:', data);\r\n            setCrisisLevel(data.crisisLevel);\r\n            setDetectedKeywords(data.keywords || []);\r\n\r\n            // Auto-show modal for critical levels\r\n            if (data.crisisLevel >= CRISIS_THRESHOLD) {\r\n                setShowModal(true);\r\n            }\r\n        });\r\n\r\n        // Connection error handling\r\n        newSocket.on('connect_error', (error) => {\r\n            console.error('Socket connection error:', error);\r\n        });\r\n\r\n        setSocket(newSocket);\r\n\r\n        // Cleanup on unmount\r\n        return () => {\r\n            newSocket.close();\r\n        };\r\n    }, []);\r\n\r\n    const dismissModal = () => {\r\n        // Only allow dismissal for non-critical levels (< 9)\r\n        if (crisisLevel < 9) {\r\n            setShowModal(false);\r\n        }\r\n    };\r\n\r\n    return {\r\n        crisisLevel,\r\n        isCritical: crisisLevel >= CRISIS_THRESHOLD,\r\n        showModal,\r\n        detectedKeywords,\r\n        dismissModal,\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\hooks\\useTherapistCrisisAlerts.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":58,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":23},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nE:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\hooks\\useTherapistCrisisAlerts.ts:81:9\n  79 |         });\n  80 |\n> 81 |         setSocket(newSocket);\n     |         ^^^^^^^^^ Avoid calling setState() directly within an effect\n  82 |\n  83 |         // Request notification permission on mount\n  84 |         if ('Notification' in window && Notification.permission === 'default') {","line":81,"column":9,"nodeType":null,"endLine":81,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { io, Socket } from 'socket.io-client';\r\n\r\nexport interface CrisisAlert {\r\n    id: string;\r\n    crisisLevel: number;\r\n    urgency: string;\r\n    keywords: string[];\r\n    message: string; // Alert message to display\r\n    patientInfo: string;\r\n    timestamp: Date;\r\n    userId: string;\r\n}\r\n\r\ninterface UseTherapistCrisisAlertsReturn {\r\n    crisisAlerts: CrisisAlert[];\r\n    acceptCrisisSession: (alertId: string) => void;\r\n    dismissAlert: (alertId: string) => void;\r\n}\r\n\r\nconst SOCKET_URL = import.meta.env.VITE_API_URL?.replace('/api', '') || 'http://localhost:3001';\r\n\r\nexport const useTherapistCrisisAlerts = (): UseTherapistCrisisAlertsReturn => {\r\n    const [crisisAlerts, setCrisisAlerts] = useState<CrisisAlert[]>([]);\r\n    const [socket, setSocket] = useState<Socket | null>(null);\r\n\r\n    useEffect(() => {\r\n        // Initialize Socket.IO connection for therapists\r\n        const newSocket = io(SOCKET_URL, {\r\n            transports: ['websocket', 'polling'],\r\n            auth: {\r\n                token: localStorage.getItem('token'), // Therapist JWT token\r\n                role: 'therapist'\r\n            },\r\n        });\r\n\r\n        // Listen for crisis alerts broadcast to all therapists\r\n        newSocket.on('therapist:crisis_alert', (data: any) => {\r\n            console.log('Therapist received crisis alert:', data);\r\n\r\n            const newAlert: CrisisAlert = {\r\n                id: `alert_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n                crisisLevel: data.crisisLevel,\r\n                urgency: data.urgency,\r\n                keywords: data.keywords || [],\r\n                message: data.message || `Level ${data.crisisLevel}/10 emergency - Immediate assistance required`,\r\n                patientInfo: `Anonymous Patient (Level ${data.crisisLevel}/10 emergency)`,\r\n                timestamp: new Date(),\r\n                userId: data.userId || 'unknown'\r\n            };\r\n\r\n            setCrisisAlerts(prev => [newAlert, ...prev]);\r\n\r\n            // Play alert sound (optional)\r\n            try {\r\n                const audio = new Audio('/alert-sound.mp3');\r\n                audio.play().catch(e => console.log('Audio play failed:', e));\r\n            } catch (e) {\r\n                console.log('Audio not available');\r\n            }\r\n\r\n            // Browser notification (if permission granted)\r\n            if ('Notification' in window && Notification.permission === 'granted') {\r\n                new Notification('ðŸš¨ Emergency Session Request', {\r\n                    body: `Crisis Level ${data.crisisLevel}/10 - Patient needs immediate support`,\r\n                    icon: '/crisis-icon.png',\r\n                    tag: newAlert.id\r\n                });\r\n            }\r\n        });\r\n\r\n        // Connection status\r\n        newSocket.on('connect', () => {\r\n            console.log('Therapist connected to crisis alert system');\r\n        });\r\n\r\n        newSocket.on('connect_error', (error) => {\r\n            console.error('Therapist socket connection error:', error);\r\n        });\r\n\r\n        setSocket(newSocket);\r\n\r\n        // Request notification permission on mount\r\n        if ('Notification' in window && Notification.permission === 'default') {\r\n            Notification.requestPermission();\r\n        }\r\n\r\n        // Cleanup on unmount\r\n        return () => {\r\n            newSocket.close();\r\n        };\r\n    }, []);\r\n\r\n    const acceptCrisisSession = (alertId: string) => {\r\n        // Remove alert from list\r\n        setCrisisAlerts(prev => prev.filter(alert => alert.id !== alertId));\r\n\r\n        // Notify backend that this therapist accepted the session\r\n        if (socket) {\r\n            const alert = crisisAlerts.find(a => a.id === alertId);\r\n            if (alert) {\r\n                socket.emit('therapist:accept_crisis', {\r\n                    alertId,\r\n                    userId: alert.userId,\r\n                    therapistId: 'current_therapist_id' // TODO: Get from auth context\r\n                });\r\n            }\r\n        }\r\n\r\n        console.log(`Therapist accepted crisis session: ${alertId}`);\r\n    };\r\n\r\n    const dismissAlert = (alertId: string) => {\r\n        // Remove alert - another therapist will handle it\r\n        setCrisisAlerts(prev => prev.filter(alert => alert.id !== alertId));\r\n        console.log(`Alert dismissed: ${alertId}`);\r\n    };\r\n\r\n    return {\r\n        crisisAlerts,\r\n        acceptCrisisSession,\r\n        dismissAlert\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\layouts\\TherapistLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\BreathingExercisesPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\ChatbotPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\Dashboard.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nE:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\Dashboard.tsx:51:9\n  49 |             return;\n  50 |         }\n> 51 |         fetchConversations();\n     |         ^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  52 |         fetchAppointments();\n  53 |     }, [user, navigate]);\n  54 |","line":51,"column":9,"nodeType":null,"endLine":51,"endColumn":27},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchConversations'. Either include it or remove the dependency array.","line":53,"column":8,"nodeType":"ArrayExpression","endLine":53,"endColumn":24,"suggestions":[{"desc":"Update the dependencies array to be: [user, navigate, fetchConversations]","fix":{"range":[2255,2271],"text":"[user, navigate, fetchConversations]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { ChatWindow } from '../components/ChatWindow';\r\nimport { TherapistList } from '../components/TherapistList';\r\nimport { TherapistProfile } from '../components/TherapistProfile';\r\nimport { InspirationPage } from './InspirationPage';\r\nimport { ProfilePage } from './ProfilePage';\r\nimport api from '../services/api';\r\nimport { LogOut, MessageSquare, Calendar, User, Home, TrendingUp, BookOpen, Bot } from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport const Dashboard: React.FC = () => {\r\n    const { user, logout } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [conversations, setConversations] = useState<any[]>([]);\r\n    const [selectedConversationId, setSelectedConversationId] = useState<string | null>(null);\r\n    const [activeTab, setActiveTab] = useState<'home' | 'chat' | 'appointments' | 'profile'>('home');\r\n\r\n    const [, setAppointments] = useState<any[]>([]);\r\n\r\n    const fetchAppointments = async () => {\r\n        try {\r\n            const data = await api.getAppointments();\r\n            setAppointments(data);\r\n        } catch (error) {\r\n            console.error('Failed to fetch appointments', error);\r\n        }\r\n    };\r\n\r\n    const fetchConversations = async () => {\r\n        try {\r\n            const response = await api.get('/chat/conversations');\r\n            // Filter out AI Bot conversations (participants include 'bot')\r\n            const humanConversations = response.data.filter((c: any) =>\r\n                !c.participants.some((p: any) => p === 'bot' || p?.name === 'bot' || p?._id === 'bot')\r\n            );\r\n            setConversations(humanConversations);\r\n            if (humanConversations.length > 0 && !selectedConversationId) {\r\n                setSelectedConversationId(humanConversations[0]._id);\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to fetch conversations', error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (user?.role === 'therapist') {\r\n            navigate('/therapist/dashboard', { replace: true });\r\n            return;\r\n        }\r\n        fetchConversations();\r\n        fetchAppointments();\r\n    }, [user, navigate]);\r\n\r\n    const [selectedTherapist, setSelectedTherapist] = useState<any | null>(null);\r\n\r\n    const handleChatWithTherapist = async (therapistId: string) => {\r\n        try {\r\n            // Check if conversation already exists\r\n            const existingConv = conversations.find(c =>\r\n                c.participants.some((p: any) => (p._id === therapistId || p === therapistId))\r\n            );\r\n\r\n            if (existingConv) {\r\n                setSelectedConversationId(existingConv._id);\r\n            } else {\r\n                // Create new conversation\r\n                const response = await api.post('/chat/conversations', {\r\n                    participants: [therapistId],\r\n                    type: 'direct'\r\n                });\r\n                setConversations(prev => [response.data, ...prev]);\r\n                setSelectedConversationId(response.data._id);\r\n            }\r\n\r\n            // Switch to chat tab\r\n            setActiveTab('chat');\r\n            setSelectedTherapist(null); // Close profile\r\n        } catch (error) {\r\n            console.error('Failed to start chat', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex h-screen bg-slate-50 overflow-hidden\">\r\n            {/* Sidebar */}\r\n            <div className=\"w-64 bg-white border-r border-slate-200 flex flex-col\">\r\n                <div className=\"p-6\">\r\n                    <h1 className=\"text-2xl font-bold text-primary-600 flex items-center gap-2\">\r\n                        Mindora\r\n                    </h1>\r\n                </div>\r\n\r\n                <nav className=\"flex-1 px-4 space-y-2\">\r\n                    <button\r\n                        onClick={() => setActiveTab('home')}\r\n                        className={`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${activeTab === 'home' ? 'bg-primary-50 text-primary-700' : 'text-slate-600 hover:bg-slate-50'\r\n                            }`}\r\n                    >\r\n                        <Home className=\"h-5 w-5\" />\r\n                        <span className=\"font-medium\">Home</span>\r\n                    </button>\r\n                    <button\r\n                        onClick={() => navigate('/messages')}\r\n                        className=\"w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors text-slate-600 hover:bg-slate-50\"\r\n                    >\r\n                        <MessageSquare className=\"h-5 w-5\" />\r\n                        <span className=\"font-medium\">Messages</span>\r\n                    </button>\r\n                    <button\r\n                        onClick={() => navigate('/appointments')}\r\n                        className=\"w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors text-slate-600 hover:bg-slate-50\"\r\n                    >\r\n                        <Calendar className=\"h-5 w-5\" />\r\n                        <span className=\"font-medium\">Appointments</span>\r\n                    </button>\r\n                    <button\r\n                        onClick={() => navigate('/chatbot')}\r\n                        className=\"w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors text-slate-600 hover:bg-slate-50\"\r\n                    >\r\n                        <Bot className=\"h-5 w-5\" />\r\n                        <span className=\"font-medium\">AI Assistant</span>\r\n                    </button>\r\n                    <button\r\n                        onClick={() => navigate('/progress')}\r\n                        className=\"w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors text-slate-600 hover:bg-slate-50\"\r\n                    >\r\n                        <TrendingUp className=\"h-5 w-5\" />\r\n                        <span className=\"font-medium\">My Progress</span>\r\n                    </button>\r\n                    <button\r\n                        onClick={() => navigate('/resources')}\r\n                        className=\"w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors text-slate-600 hover:bg-slate-50\"\r\n                    >\r\n                        <BookOpen className=\"h-5 w-5\" />\r\n                        <span className=\"font-medium\">Resources</span>\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveTab('profile')}\r\n                        className={`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${activeTab === 'profile' ? 'bg-primary-50 text-primary-700' : 'text-slate-600 hover:bg-slate-50'\r\n                            }`}\r\n                    >\r\n                        <User className=\"h-5 w-5\" />\r\n                        <span className=\"font-medium\">Profile</span>\r\n                    </button>\r\n                </nav>\r\n\r\n                <div className=\"p-4 border-t border-slate-200\">\r\n                    <div className=\"flex items-center space-x-3 mb-4\">\r\n                        <div className=\"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center text-primary-700 font-bold\">\r\n                            {user?.name?.charAt(0) || 'U'}\r\n                        </div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                            <p className=\"text-sm font-medium text-slate-900 truncate\">{user?.name}</p>\r\n                            <p className=\"text-xs text-slate-500 truncate\">{user?.role}</p>\r\n                        </div>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => {\r\n                            logout();\r\n                            window.location.href = '/';\r\n                        }}\r\n                        className=\"w-full flex items-center justify-center space-x-2 px-4 py-2 border border-slate-300 rounded-lg text-sm font-medium text-slate-700 hover:bg-slate-50 transition-colors\"\r\n                    >\r\n                        <LogOut className=\"h-4 w-4\" />\r\n                        <span>Sign out</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Main Content */}\r\n            <main className=\"flex-1 flex flex-col min-w-0 overflow-hidden\">\r\n                {activeTab === 'home' && <InspirationPage />}\r\n\r\n                {activeTab === 'chat' && (\r\n                    <div className=\"flex-1 flex\">\r\n                        {/* Conversation List */}\r\n                        <div className=\"w-80 bg-white border-r border-slate-200 flex flex-col\">\r\n                            <div className=\"p-4 border-b border-slate-200\">\r\n                                <h3 className=\"font-bold text-slate-700\">Your Conversations</h3>\r\n                            </div>\r\n                            <div className=\"flex-1 overflow-y-auto\">\r\n                                {conversations.map(conv => (\r\n                                    <button\r\n                                        key={conv._id}\r\n                                        onClick={() => setSelectedConversationId(conv._id)}\r\n                                        className={`w-full p-4 text-left border-b border-slate-100 hover:bg-slate-50 transition-colors ${selectedConversationId === conv._id ? 'bg-primary-50' : ''\r\n                                            }`}\r\n                                    >\r\n                                        <div className=\"flex justify-between items-start\">\r\n                                            <h4 className=\"font-medium text-slate-900 truncate\">\r\n                                                {conv.type === 'group' ? conv.groupName : 'Direct Chat'}\r\n                                            </h4>\r\n                                            <span className=\"text-xs text-slate-500\">\r\n                                                {new Date(conv.updatedAt).toLocaleDateString()}\r\n                                            </span>\r\n                                        </div>\r\n                                        <p className=\"text-sm text-slate-500 truncate mt-1\">\r\n                                            {conv.lastMessage?.content || 'No messages yet'}\r\n                                        </p>\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Chat Area */}\r\n                        <div className=\"flex-1 bg-slate-50 p-4\">\r\n                            {selectedConversationId ? (\r\n                                <ChatWindow conversationId={selectedConversationId} />\r\n                            ) : (\r\n                                <div className=\"h-full flex items-center justify-center text-slate-500\">\r\n                                    Select a conversation to start chatting\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {activeTab === 'appointments' && (\r\n                    <div className=\"p-8 overflow-y-auto h-full\">\r\n                        {selectedTherapist ? (\r\n                            <TherapistProfile\r\n                                therapist={selectedTherapist}\r\n                                onBack={() => setSelectedTherapist(null)}\r\n                                onChat={() => handleChatWithTherapist(selectedTherapist._id)}\r\n                                onBookingComplete={fetchAppointments}\r\n                            />\r\n                        ) : (\r\n                            <>\r\n                                <div className=\"flex justify-between items-center mb-6\">\r\n                                    <h2 className=\"text-2xl font-bold text-slate-900\">Find a Specialist</h2>\r\n                                    <div className=\"flex gap-2\">\r\n                                        <select className=\"border border-slate-300 rounded-lg px-3 py-2 text-sm\">\r\n                                            <option>All Specializations</option>\r\n                                            <option>Anxiety</option>\r\n                                            <option>Depression</option>\r\n                                            <option>Couples Therapy</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <TherapistList onSelect={setSelectedTherapist} />\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                )}\r\n\r\n                {activeTab === 'profile' && <ProfilePage />}\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\InspirationPage.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nE:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\InspirationPage.tsx:28:9\n  26 |         // Set random quote\n  27 |         const randomIndex = Math.floor(Math.random() * QUOTES.length);\n> 28 |         setQuote(QUOTES[randomIndex]);\n     |         ^^^^^^^^ Avoid calling setState() directly within an effect\n  29 |\n  30 |         // Set greeting based on time\n  31 |         const hour = new Date().getHours();","line":28,"column":9,"nodeType":null,"endLine":28,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Wind, Sun, Moon, Cloud, Quote, ArrowRight } from 'lucide-react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n\r\nconst QUOTES = [\r\n    { text: \"Peace comes from within. Do not seek it without.\", author: \"Buddha\" },\r\n    { text: \"The best way to predict the future is to create it.\", author: \"Peter Drucker\" },\r\n    { text: \"You are enough just as you are.\", author: \"Meghan Markle\" },\r\n    { text: \"Breath is the bridge which connects life to consciousness.\", author: \"Thich Nhat Hanh\" },\r\n    { text: \"Every moment is a fresh beginning.\", author: \"T.S. Eliot\" },\r\n    { text: \"Believe you can and you're halfway there.\", author: \"Theodore Roosevelt\" },\r\n    { text: \"Act as if what you do makes a difference. It does.\", author: \"William James\" },\r\n    { text: \"Happiness depends upon ourselves.\", author: \"Aristotle\" }\r\n];\r\n\r\nexport const InspirationPage: React.FC = () => {\r\n    const { user } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [quote, setQuote] = useState(QUOTES[0]);\r\n    const [greeting, setGreeting] = useState('');\r\n    const [selectedMood, setSelectedMood] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        // Set random quote\r\n        const randomIndex = Math.floor(Math.random() * QUOTES.length);\r\n        setQuote(QUOTES[randomIndex]);\r\n\r\n        // Set greeting based on time\r\n        const hour = new Date().getHours();\r\n        if (hour < 12) setGreeting('Good Morning');\r\n        else if (hour < 18) setGreeting('Good Afternoon');\r\n        else setGreeting('Good Evening');\r\n\r\n        return () => { };\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"h-full w-full overflow-y-auto bg-gradient-to-br from-teal-50 via-blue-50 to-indigo-50 p-8\">\r\n            <div className=\"max-w-4xl mx-auto space-y-12\">\r\n\r\n                {/* Header Section */}\r\n                <header className=\"text-center space-y-4 animate-fade-in\">\r\n                    <div className=\"flex justify-center mb-4\">\r\n                        {greeting.includes('Morning') ? (\r\n                            <Sun className=\"w-12 h-12 text-amber-400\" />\r\n                        ) : greeting.includes('Afternoon') ? (\r\n                            <Cloud className=\"w-12 h-12 text-blue-400\" />\r\n                        ) : (\r\n                            <Moon className=\"w-12 h-12 text-indigo-400\" />\r\n                        )}\r\n                    </div>\r\n                    <h1 className=\"text-4xl md:text-5xl font-serif text-slate-800 tracking-tight\">\r\n                        {greeting}, {user?.name?.split(' ')[0] || 'Friend'}\r\n                    </h1>\r\n                    <p className=\"text-slate-500 text-lg\">\r\n                        {new Date().toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' })}\r\n                    </p>\r\n                </header>\r\n\r\n                {/* Quote Card */}\r\n                <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-8 md:p-12 shadow-xl border border-white/50 relative overflow-hidden transition-all hover:shadow-2xl hover:bg-white/90\">\r\n                    <Quote className=\"absolute top-6 left-6 w-12 h-12 text-teal-100 -z-10\" />\r\n                    <figure className=\"text-center space-y-6\">\r\n                        <blockquote className=\"text-2xl md:text-3xl font-light text-slate-700 leading-relaxed italic\">\r\n                            \"{quote.text}\"\r\n                        </blockquote>\r\n                        <figcaption className=\"text-teal-600 font-medium tracking-wide uppercase text-sm\">\r\n                            â€” {quote.author}\r\n                        </figcaption>\r\n                    </figure>\r\n                </div>\r\n\r\n                {/* Breathing Exercise Link */}\r\n                <div\r\n                    onClick={() => navigate('/breathing')}\r\n                    className=\"bg-gradient-to-r from-teal-500 to-blue-500 rounded-2xl p-8 shadow-lg text-white cursor-pointer hover:shadow-xl hover:scale-[1.02] transition-all group\"\r\n                >\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div className=\"space-y-2\">\r\n                            <div className=\"flex items-center space-x-2\">\r\n                                <Wind className=\"w-6 h-6 text-teal-100\" />\r\n                                <h3 className=\"font-bold text-xl tracking-wide\">Breathing Space</h3>\r\n                            </div>\r\n                            <p className=\"text-teal-50 max-w-md\">\r\n                                Discover professional breathing techniques like Box Breathing and 4-7-8 Relaxation to calm your mind.\r\n                            </p>\r\n                        </div>\r\n                        <div className=\"bg-white/20 p-3 rounded-full group-hover:bg-white/30 transition-colors\">\r\n                            <ArrowRight className=\"w-6 h-6\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Mood Check-in Widget */}\r\n                <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-lg border border-white/50\">\r\n                    <h3 className=\"text-center text-slate-600 font-medium uppercase tracking-widest text-sm mb-8\">How are you feeling today?</h3>\r\n\r\n                    <div className=\"flex flex-wrap justify-center gap-4 md:gap-8\">\r\n                        {[\r\n                            { label: 'Great', emoji: 'ðŸ˜„', color: 'bg-green-100 text-green-600 hover:bg-green-200', ring: 'ring-green-400' },\r\n                            { label: 'Good', emoji: 'ðŸ™‚', color: 'bg-blue-100 text-blue-600 hover:bg-blue-200', ring: 'ring-blue-400' },\r\n                            { label: 'Okay', emoji: 'ðŸ˜', color: 'bg-slate-100 text-slate-600 hover:bg-slate-200', ring: 'ring-slate-400' },\r\n                            { label: 'Low', emoji: 'ðŸ˜”', color: 'bg-orange-100 text-orange-600 hover:bg-orange-200', ring: 'ring-orange-400' },\r\n                            { label: 'Bad', emoji: 'ðŸ˜«', color: 'bg-red-100 text-red-600 hover:bg-red-200', ring: 'ring-red-400' },\r\n                        ].map((mood) => (\r\n                            <button\r\n                                key={mood.label}\r\n                                onClick={() => {\r\n                                    setSelectedMood(mood.label);\r\n                                    // In a real app, this would save to the backend\r\n                                    console.log(`Mood selected: ${mood.label}`);\r\n                                }}\r\n                                className={`flex flex-col items-center gap-2 p-4 rounded-xl transition-all transform hover:scale-110 ${mood.color} ${selectedMood === mood.label ? `ring-4 ${mood.ring} scale-110 shadow-lg` : 'opacity-80 hover:opacity-100'\r\n                                    }`}\r\n                            >\r\n                                <span className=\"text-4xl\">{mood.emoji}</span>\r\n                                <span className=\"text-sm font-medium\">{mood.label}</span>\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                    {selectedMood && (\r\n                        <p className=\"text-center text-slate-500 mt-6 animate-fade-in\">\r\n                            Thanks for checking in! We've logged that you're feeling <span className=\"font-medium text-slate-800\">{selectedMood.toLowerCase()}</span>.\r\n                        </p>\r\n                    )}\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\LandingPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\LoginPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\OnboardingPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\PatientAppointmentsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\PatientLoginPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\PatientMessagesPage.tsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nE:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\PatientMessagesPage.tsx:36:39\n  34 |             name: 'Dr. Sarah Mehta',\n  35 |             lastMessage: 'Great progress this week!',\n> 36 |             lastMessageTime: new Date(Date.now() - 3600000),\n     |                                       ^^^^^^^^^^ Cannot call impure function\n  37 |             unreadCount: 2,\n  38 |             avatar: 'https://ui-avatars.com/api/?name=Sarah+Mehta&background=3b82f6&color=fff&size=100'\n  39 |         },","line":36,"column":39,"nodeType":null,"endLine":36,"endColumn":49},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nE:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\PatientMessagesPage.tsx:45:39\n  43 |             name: 'Dr. Rajesh Kumar',\n  44 |             lastMessage: \"Let's schedule our next session\",\n> 45 |             lastMessageTime: new Date(Date.now() - 86400000),\n     |                                       ^^^^^^^^^^ Cannot call impure function\n  46 |             unreadCount: 0,\n  47 |             avatar: 'https://ui-avatars.com/api/?name=Rajesh+Kumar&background=8b5cf6&color=fff&size=100'\n  48 |         },","line":45,"column":39,"nodeType":null,"endLine":45,"endColumn":49},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nE:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\PatientMessagesPage.tsx:54:39\n  52 |             name: 'Anxiety Support Circle',\n  53 |             lastMessage: 'Maya: Thanks for sharing, really helps!',\n> 54 |             lastMessageTime: new Date(Date.now() - 7200000),\n     |                                       ^^^^^^^^^^ Cannot call impure function\n  55 |             unreadCount: 5,\n  56 |             participants: ['You', 'Maya', 'Arjun', 'Priya', 'Dr. Neha']\n  57 |         },","line":54,"column":39,"nodeType":null,"endLine":54,"endColumn":49},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nE:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\PatientMessagesPage.tsx:63:39\n  61 |             name: 'Mindfulness Practice Group',\n  62 |             lastMessage: 'Guided meditation session tomorrow at 7 PM',\n> 63 |             lastMessageTime: new Date(Date.now() - 172800000),\n     |                                       ^^^^^^^^^^ Cannot call impure function\n  64 |             unreadCount: 0,\n  65 |             participants: ['You', 'Karan', 'Anjali', 'Rohit']\n  66 |         }","line":63,"column":39,"nodeType":null,"endLine":63,"endColumn":49},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nE:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\PatientMessagesPage.tsx:78:41\n  76 |                     senderName: 'Dr. Sarah Mehta',\n  77 |                     content: 'Hi! How have you been feeling since our last session?',\n> 78 |                     timestamp: new Date(Date.now() - 7200000),\n     |                                         ^^^^^^^^^^ Cannot call impure function\n  79 |                     isOwn: false\n  80 |                 },\n  81 |                 {","line":78,"column":41,"nodeType":null,"endLine":78,"endColumn":51},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nE:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\PatientMessagesPage.tsx:86:41\n  84 |                     senderName: 'You',\n  85 |                     content: 'Much better! The breathing exercises really helped during my anxiety attack yesterday.',\n> 86 |                     timestamp: new Date(Date.now() - 7000000),\n     |                                         ^^^^^^^^^^ Cannot call impure function\n  87 |                     isOwn: true\n  88 |                 },\n  89 |                 {","line":86,"column":41,"nodeType":null,"endLine":86,"endColumn":51},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nE:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\PatientMessagesPage.tsx:94:41\n  92 |                     senderName: 'Dr. Sarah Mehta',\n  93 |                     content: \"That's wonderful to hear! Remember to practice them daily, not just during attacks. It helps build resilience.\",\n> 94 |                     timestamp: new Date(Date.now() - 3600000),\n     |                                         ^^^^^^^^^^ Cannot call impure function\n  95 |                     isOwn: false\n  96 |                 },\n  97 |                 {","line":94,"column":41,"nodeType":null,"endLine":94,"endColumn":51},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nE:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\PatientMessagesPage.tsx:102:41\n  100 |                     senderName: 'Dr. Sarah Mehta',\n  101 |                     content: 'Great progress this week!',\n> 102 |                     timestamp: new Date(Date.now() - 1800000),\n      |                                         ^^^^^^^^^^ Cannot call impure function\n  103 |                     isOwn: false\n  104 |                 }\n  105 |             ];","line":102,"column":41,"nodeType":null,"endLine":102,"endColumn":51},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nE:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\PatientMessagesPage.tsx:113:41\n  111 |                     senderName: 'Maya',\n  112 |                     content: \"Hi everyone! I'm new to this group. Been struggling with social anxiety lately.\",\n> 113 |                     timestamp: new Date(Date.now() - 10800000),\n      |                                         ^^^^^^^^^^ Cannot call impure function\n  114 |                     isOwn: false\n  115 |                 },\n  116 |                 {","line":113,"column":41,"nodeType":null,"endLine":113,"endColumn":51},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nE:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\PatientMessagesPage.tsx:121:41\n  119 |                     senderName: 'Arjun',\n  120 |                     content: 'Welcome Maya! This is a safe space. We all understand what you\\'re going through.',\n> 121 |                     timestamp: new Date(Date.now() - 10000000),\n      |                                         ^^^^^^^^^^ Cannot call impure function\n  122 |                     isOwn: false\n  123 |                 },\n  124 |                 {","line":121,"column":41,"nodeType":null,"endLine":121,"endColumn":51},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nE:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\PatientMessagesPage.tsx:129:41\n  127 |                     senderName: 'You',\n  128 |                     content: 'Welcome! I found the group exercises really helpful for my anxiety. Dr. Neha is amazing.',\n> 129 |                     timestamp: new Date(Date.now() - 9000000),\n      |                                         ^^^^^^^^^^ Cannot call impure function\n  130 |                     isOwn: true\n  131 |                 },\n  132 |                 {","line":129,"column":41,"nodeType":null,"endLine":129,"endColumn":51},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nE:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\PatientMessagesPage.tsx:137:41\n  135 |                     senderName: 'Dr. Neha (Facilitator)',\n  136 |                     content: \"Welcome Maya! Let's do a quick check-in: How is everyone feeling today? Rate 1-10.\",\n> 137 |                     timestamp: new Date(Date.now() - 8000000),\n      |                                         ^^^^^^^^^^ Cannot call impure function\n  138 |                     isOwn: false\n  139 |                 },\n  140 |                 {","line":137,"column":41,"nodeType":null,"endLine":137,"endColumn":51},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nE:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\PatientMessagesPage.tsx:145:41\n  143 |                     senderName: 'Priya',\n  144 |                     content: \"I'm at a 6 today. Better than yesterday!\",\n> 145 |                     timestamp: new Date(Date.now() - 7500000),\n      |                                         ^^^^^^^^^^ Cannot call impure function\n  146 |                     isOwn: false\n  147 |                 },\n  148 |                 {","line":145,"column":41,"nodeType":null,"endLine":145,"endColumn":51},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nE:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\PatientMessagesPage.tsx:153:41\n  151 |                     senderName: 'Maya',\n  152 |                     content: 'Thanks for sharing, really helps!',\n> 153 |                     timestamp: new Date(Date.now() - 7200000),\n      |                                         ^^^^^^^^^^ Cannot call impure function\n  154 |                     isOwn: false\n  155 |                 }\n  156 |             ];","line":153,"column":41,"nodeType":null,"endLine":153,"endColumn":51},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nE:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\PatientMessagesPage.tsx:172:21\n  170 |\n  171 |     const formatTime = (date: Date) => {\n> 172 |         const now = Date.now();\n      |                     ^^^^^^^^^^ Cannot call impure function\n  173 |         const diff = now - date.getTime();\n  174 |         const hours = diff / 3600000;\n  175 |","line":172,"column":21,"nodeType":null,"endLine":172,"endColumn":31}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Search, Send, Users, User, MoreVertical, Smile } from 'lucide-react';\r\n\r\ninterface Message {\r\n    id: string;\r\n    senderId: string;\r\n    senderName: string;\r\n    content: string;\r\n    timestamp: Date;\r\n    isOwn: boolean;\r\n}\r\n\r\ninterface Chat {\r\n    id: string;\r\n    type: 'direct' | 'group';\r\n    name: string;\r\n    lastMessage: string;\r\n    lastMessageTime: Date;\r\n    unreadCount: number;\r\n    avatar?: string;\r\n    participants?: string[];\r\n}\r\n\r\nexport const PatientMessagesPage: React.FC = () => {\r\n    const [activeChat, setActiveChat] = useState<string>('chat1');\r\n    const [newMessage, setNewMessage] = useState('');\r\n\r\n    // Mock chats\r\n    const chats: Chat[] = [\r\n        {\r\n            id: 'chat1',\r\n            type: 'direct',\r\n            name: 'Dr. Sarah Mehta',\r\n            lastMessage: 'Great progress this week!',\r\n            lastMessageTime: new Date(Date.now() - 3600000),\r\n            unreadCount: 2,\r\n            avatar: 'https://ui-avatars.com/api/?name=Sarah+Mehta&background=3b82f6&color=fff&size=100'\r\n        },\r\n        {\r\n            id: 'chat2',\r\n            type: 'direct',\r\n            name: 'Dr. Rajesh Kumar',\r\n            lastMessage: \"Let's schedule our next session\",\r\n            lastMessageTime: new Date(Date.now() - 86400000),\r\n            unreadCount: 0,\r\n            avatar: 'https://ui-avatars.com/api/?name=Rajesh+Kumar&background=8b5cf6&color=fff&size=100'\r\n        },\r\n        {\r\n            id: 'group1',\r\n            type: 'group',\r\n            name: 'Anxiety Support Circle',\r\n            lastMessage: 'Maya: Thanks for sharing, really helps!',\r\n            lastMessageTime: new Date(Date.now() - 7200000),\r\n            unreadCount: 5,\r\n            participants: ['You', 'Maya', 'Arjun', 'Priya', 'Dr. Neha']\r\n        },\r\n        {\r\n            id: 'group2',\r\n            type: 'group',\r\n            name: 'Mindfulness Practice Group',\r\n            lastMessage: 'Guided meditation session tomorrow at 7 PM',\r\n            lastMessageTime: new Date(Date.now() - 172800000),\r\n            unreadCount: 0,\r\n            participants: ['You', 'Karan', 'Anjali', 'Rohit']\r\n        }\r\n    ];\r\n\r\n    // Mock messages for active chat\r\n    const getMockMessages = (chatId: string): Message[] => {\r\n        if (chatId === 'chat1') {\r\n            return [\r\n                {\r\n                    id: 'm1',\r\n                    senderId: 'therapist1',\r\n                    senderName: 'Dr. Sarah Mehta',\r\n                    content: 'Hi! How have you been feeling since our last session?',\r\n                    timestamp: new Date(Date.now() - 7200000),\r\n                    isOwn: false\r\n                },\r\n                {\r\n                    id: 'm2',\r\n                    senderId: 'me',\r\n                    senderName: 'You',\r\n                    content: 'Much better! The breathing exercises really helped during my anxiety attack yesterday.',\r\n                    timestamp: new Date(Date.now() - 7000000),\r\n                    isOwn: true\r\n                },\r\n                {\r\n                    id: 'm3',\r\n                    senderId: 'therapist1',\r\n                    senderName: 'Dr. Sarah Mehta',\r\n                    content: \"That's wonderful to hear! Remember to practice them daily, not just during attacks. It helps build resilience.\",\r\n                    timestamp: new Date(Date.now() - 3600000),\r\n                    isOwn: false\r\n                },\r\n                {\r\n                    id: 'm4',\r\n                    senderId: 'therapist1',\r\n                    senderName: 'Dr. Sarah Mehta',\r\n                    content: 'Great progress this week!',\r\n                    timestamp: new Date(Date.now() - 1800000),\r\n                    isOwn: false\r\n                }\r\n            ];\r\n        } else if (chatId === 'group1') {\r\n            return [\r\n                {\r\n                    id: 'g1',\r\n                    senderId: 'user1',\r\n                    senderName: 'Maya',\r\n                    content: \"Hi everyone! I'm new to this group. Been struggling with social anxiety lately.\",\r\n                    timestamp: new Date(Date.now() - 10800000),\r\n                    isOwn: false\r\n                },\r\n                {\r\n                    id: 'g2',\r\n                    senderId: 'user2',\r\n                    senderName: 'Arjun',\r\n                    content: 'Welcome Maya! This is a safe space. We all understand what you\\'re going through.',\r\n                    timestamp: new Date(Date.now() - 10000000),\r\n                    isOwn: false\r\n                },\r\n                {\r\n                    id: 'g3',\r\n                    senderId: 'me',\r\n                    senderName: 'You',\r\n                    content: 'Welcome! I found the group exercises really helpful for my anxiety. Dr. Neha is amazing.',\r\n                    timestamp: new Date(Date.now() - 9000000),\r\n                    isOwn: true\r\n                },\r\n                {\r\n                    id: 'g4',\r\n                    senderId: 'therapist2',\r\n                    senderName: 'Dr. Neha (Facilitator)',\r\n                    content: \"Welcome Maya! Let's do a quick check-in: How is everyone feeling today? Rate 1-10.\",\r\n                    timestamp: new Date(Date.now() - 8000000),\r\n                    isOwn: false\r\n                },\r\n                {\r\n                    id: 'g5',\r\n                    senderId: 'user3',\r\n                    senderName: 'Priya',\r\n                    content: \"I'm at a 6 today. Better than yesterday!\",\r\n                    timestamp: new Date(Date.now() - 7500000),\r\n                    isOwn: false\r\n                },\r\n                {\r\n                    id: 'g6',\r\n                    senderId: 'user1',\r\n                    senderName: 'Maya',\r\n                    content: 'Thanks for sharing, really helps!',\r\n                    timestamp: new Date(Date.now() - 7200000),\r\n                    isOwn: false\r\n                }\r\n            ];\r\n        }\r\n        return [];\r\n    };\r\n\r\n    const messages = getMockMessages(activeChat);\r\n    const currentChat = chats.find(c => c.id === activeChat);\r\n\r\n    const handleSendMessage = () => {\r\n        if (!newMessage.trim()) return;\r\n        // TODO: Send message to API\r\n        console.log('Sending:', newMessage);\r\n        setNewMessage('');\r\n    };\r\n\r\n    const formatTime = (date: Date) => {\r\n        const now = Date.now();\r\n        const diff = now - date.getTime();\r\n        const hours = diff / 3600000;\r\n\r\n        if (hours < 1) return `${Math.floor(diff / 60000)}m ago`;\r\n        if (hours < 24) return `${Math.floor(hours)}h ago`;\r\n        if (hours < 48) return 'Yesterday';\r\n        return date.toLocaleDateString('en-IN', { month: 'short', day: 'numeric' });\r\n    };\r\n\r\n    const directChats = chats.filter(c => c.type === 'direct');\r\n    const groupChats = chats.filter(c => c.type === 'group');\r\n\r\n    return (\r\n        <div className=\"h-screen bg-neutral-50 flex\">\r\n            {/* Sidebar */}\r\n            <div className=\"w-80 bg-white border-r border-neutral-200 flex flex-col\">\r\n                {/* Sidebar Header */}\r\n                <div className=\"p-4 border-b border-neutral-200\">\r\n                    <h2 className=\"text-2xl font-heading text-neutral-900 mb-4\">Messages</h2>\r\n                    <div className=\"relative\">\r\n                        <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-neutral-400\" />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search conversations...\"\r\n                            className=\"w-full pl-10 pr-4 py-2 bg-neutral-50 border border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-sm\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Chat List */}\r\n                <div className=\"flex-1 overflow-y-auto\">\r\n                    {/* Therapists Section */}\r\n                    <div className=\"p-4\">\r\n                        <h3 className=\"text-xs font-semibold text-neutral-500 uppercase mb-3 flex items-center gap-2\">\r\n                            <User className=\"w-4 h-4\" />\r\n                            Therapists\r\n                        </h3>\r\n                        <div className=\"space-y-1\">\r\n                            {directChats.map(chat => (\r\n                                <button\r\n                                    key={chat.id}\r\n                                    onClick={() => setActiveChat(chat.id)}\r\n                                    className={`w-full p-3 rounded-lg transition-colors text-left ${activeChat === chat.id\r\n                                        ? 'bg-primary-50 border border-primary-200'\r\n                                        : 'hover:bg-neutral-50'\r\n                                        }`}\r\n                                >\r\n                                    <div className=\"flex items-start gap-3\">\r\n                                        <img\r\n                                            src={chat.avatar}\r\n                                            alt={chat.name}\r\n                                            className=\"w-10 h-10 rounded-full\"\r\n                                        />\r\n                                        <div className=\"flex-1 min-w-0\">\r\n                                            <div className=\"flex items-start justify-between mb-1\">\r\n                                                <h4 className=\"font-semibold text-neutral-900 text-sm truncate\">\r\n                                                    {chat.name}\r\n                                                </h4>\r\n                                                <span className=\"text-xs text-neutral-500\">\r\n                                                    {formatTime(chat.lastMessageTime)}\r\n                                                </span>\r\n                                            </div>\r\n                                            <div className=\"flex items-center justify-between\">\r\n                                                <p className=\"text-xs text-neutral-600 truncate\">\r\n                                                    {chat.lastMessage}\r\n                                                </p>\r\n                                                {chat.unreadCount > 0 && (\r\n                                                    <span className=\"ml-2 px-2 py-0.5 bg-primary-600 text-white text-xs rounded-full\">\r\n                                                        {chat.unreadCount}\r\n                                                    </span>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Support Groups Section */}\r\n                    <div className=\"p-4 border-t border-neutral-100\">\r\n                        <h3 className=\"text-xs font-semibold text-neutral-500 uppercase mb-3 flex items-center gap-2\">\r\n                            <Users className=\"w-4 h-4\" />\r\n                            Support Groups\r\n                        </h3>\r\n                        <div className=\"space-y-1\">\r\n                            {groupChats.map(chat => (\r\n                                <button\r\n                                    key={chat.id}\r\n                                    onClick={() => setActiveChat(chat.id)}\r\n                                    className={`w-full p-3 rounded-lg transition-colors text-left ${activeChat === chat.id\r\n                                        ? 'bg-secondary-50 border border-secondary-200'\r\n                                        : 'hover:bg-neutral-50'\r\n                                        }`}\r\n                                >\r\n                                    <div className=\"flex items-start gap-3\">\r\n                                        <div className=\"w-10 h-10 bg-secondary-100 rounded-full flex items-center justify-center\">\r\n                                            <Users className=\"w-5 h-5 text-secondary-600\" />\r\n                                        </div>\r\n                                        <div className=\"flex-1 min-w-0\">\r\n                                            <div className=\"flex items-start justify-between mb-1\">\r\n                                                <h4 className=\"font-semibold text-neutral-900 text-sm truncate\">\r\n                                                    {chat.name}\r\n                                                </h4>\r\n                                                <span className=\"text-xs text-neutral-500\">\r\n                                                    {formatTime(chat.lastMessageTime)}\r\n                                                </span>\r\n                                            </div>\r\n                                            <p className=\"text-xs text-neutral-600 truncate mb-1\">\r\n                                                {chat.lastMessage}\r\n                                            </p>\r\n                                            <div className=\"flex items-center justify-between\">\r\n                                                <span className=\"text-xs text-neutral-500\">\r\n                                                    {chat.participants?.length} members\r\n                                                </span>\r\n                                                {chat.unreadCount > 0 && (\r\n                                                    <span className=\"px-2 py-0.5 bg-secondary-600 text-white text-xs rounded-full\">\r\n                                                        {chat.unreadCount}\r\n                                                    </span>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Chat Area */}\r\n            <div className=\"flex-1 flex flex-col\">\r\n                {currentChat ? (\r\n                    <>\r\n                        {/* Chat Header */}\r\n                        <div className=\"p-4 bg-white border-b border-neutral-200\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    {currentChat.type === 'direct' ? (\r\n                                        <img\r\n                                            src={currentChat.avatar}\r\n                                            alt={currentChat.name}\r\n                                            className=\"w-10 h-10 rounded-full\"\r\n                                        />\r\n                                    ) : (\r\n                                        <div className=\"w-10 h-10 bg-secondary-100 rounded-full flex items-center justify-center\">\r\n                                            <Users className=\"w-5 h-5 text-secondary-600\" />\r\n                                        </div>\r\n                                    )}\r\n                                    <div>\r\n                                        <h3 className=\"font-semibold text-neutral-900\">{currentChat.name}</h3>\r\n                                        {currentChat.type === 'group' && (\r\n                                            <p className=\"text-sm text-neutral-600\">\r\n                                                {currentChat.participants?.join(', ')}\r\n                                            </p>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                                <button className=\"p-2 hover:bg-neutral-100 rounded-lg transition-colors\">\r\n                                    <MoreVertical className=\"w-5 h-5 text-neutral-600\" />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Messages */}\r\n                        <div className=\"flex-1 overflow-y-auto p-6 space-y-4 bg-neutral-50\">\r\n                            {messages.map((message) => (\r\n                                <motion.div\r\n                                    key={message.id}\r\n                                    className={`flex ${message.isOwn ? 'justify-end' : 'justify-start'}`}\r\n                                    initial={{ opacity: 0, y: 10 }}\r\n                                    animate={{ opacity: 1, y: 0 }}\r\n                                >\r\n                                    <div className={`max-w-lg ${message.isOwn ? 'text-right' : 'text-left'}`}>\r\n                                        {!message.isOwn && currentChat.type === 'group' && (\r\n                                            <p className=\"text-xs text-neutral-500 mb-1 px-1\">\r\n                                                {message.senderName}\r\n                                            </p>\r\n                                        )}\r\n                                        <div\r\n                                            className={`inline-block px-4 py-3 rounded-2xl ${message.isOwn\r\n                                                ? 'bg-primary-600 text-white'\r\n                                                : 'bg-white text-neutral-900 border border-neutral-200'\r\n                                                }`}\r\n                                        >\r\n                                            <p className=\"text-sm\">{message.content}</p>\r\n                                        </div>\r\n                                        <p className=\"text-xs text-neutral-500 mt-1 px-1\">\r\n                                            {message.timestamp.toLocaleTimeString('en-IN', {\r\n                                                hour: '2-digit',\r\n                                                minute: '2-digit'\r\n                                            })}\r\n                                        </p>\r\n                                    </div>\r\n                                </motion.div>\r\n                            ))}\r\n                        </div>\r\n\r\n                        {/* Message Input */}\r\n                        <div className=\"p-4 bg-white border-t border-neutral-200\">\r\n                            <div className=\"flex items-end gap-2\">\r\n                                <button className=\"p-2 hover:bg-neutral-100 rounded-lg transition-colors\">\r\n                                    <Smile className=\"w-5 h-5 text-neutral-600\" />\r\n                                </button>\r\n                                <textarea\r\n                                    value={newMessage}\r\n                                    onChange={(e) => setNewMessage(e.target.value)}\r\n                                    onKeyPress={(e) => {\r\n                                        if (e.key === 'Enter' && !e.shiftKey) {\r\n                                            e.preventDefault();\r\n                                            handleSendMessage();\r\n                                        }\r\n                                    }}\r\n                                    placeholder=\"Type a message...\"\r\n                                    rows={1}\r\n                                    className=\"flex-1 px-4 py-3 bg-neutral-50 border border-neutral-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 resize-none\"\r\n                                />\r\n                                <button\r\n                                    onClick={handleSendMessage}\r\n                                    disabled={!newMessage.trim()}\r\n                                    className={`p-3 rounded-lg transition-colors ${newMessage.trim()\r\n                                        ? 'bg-primary-600 text-white hover:bg-primary-700'\r\n                                        : 'bg-neutral-200 text-neutral-400 cursor-not-allowed'\r\n                                        }`}\r\n                                >\r\n                                    <Send className=\"w-5 h-5\" />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </>\r\n                ) : (\r\n                    <div className=\"flex-1 flex items-center justify-center bg-neutral-50\">\r\n                        <div className=\"text-center\">\r\n                            <Users className=\"w-16 h-16 text-neutral-300 mx-auto mb-4\" />\r\n                            <p className=\"text-neutral-600\">Select a conversation to start messaging</p>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\PatientResourcesPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\PatientSignupPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\ProfilePage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\ProgressPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\RegisterPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\ResourcesPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\TherapistBookingPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\TherapistDashboardPage.tsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nE:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\TherapistDashboardPage.tsx:130:22\n  128 |\n  129 |     const formatRelativeTime = (date: Date) => {\n> 130 |         const diff = Date.now() - date.getTime();\n      |                      ^^^^^^^^^^ Cannot call impure function\n  131 |         const minutes = Math.floor(diff / 60000);\n  132 |         const hours = Math.floor(minutes / 60);\n  133 |","line":130,"column":22,"nodeType":null,"endLine":130,"endColumn":32}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport {\r\n    AlertCircle,\r\n    Calendar as CalendarIcon,\r\n    DollarSign,\r\n    Users,\r\n    Video,\r\n    Clock,\r\n    CheckCircle,\r\n    XCircle,\r\n    MessageSquare,\r\n    TrendingUp\r\n} from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useTherapistCrisisAlerts } from '../hooks/useTherapistCrisisAlerts.ts';\r\n\r\ninterface Appointment {\r\n    id: string;\r\n    patientId: string;\r\n    patientName: string;\r\n    scheduledAt: Date;\r\n    durationMinutes: number;\r\n    type: 'VIDEO_CALL' | 'AUDIO_CALL' | 'CHAT_ONLY';\r\n    status: 'PENDING' | 'CONFIRMED' | 'COMPLETED' | 'CANCELLED';\r\n}\r\n\r\ninterface DashboardStats {\r\n    upcomingSessions: number;\r\n    pendingMessages: number;\r\n    totalEarningsINR: number;\r\n    completedThisMonth: number;\r\n}\r\n\r\ninterface ActivityItem {\r\n    id: string;\r\n    type: 'SESSION_COMPLETED' | 'MESSAGE_SENT' | 'APPOINTMENT_APPROVED';\r\n    description: string;\r\n    timestamp: Date;\r\n}\r\n\r\nexport const TherapistDashboardPage: React.FC = () => {\r\n    const navigate = useNavigate();\r\n    const [appointments, setAppointments] = useState<Appointment[]>([]);\r\n    const [stats, setStats] = useState<DashboardStats>({\r\n        upcomingSessions: 0,\r\n        pendingMessages: 0,\r\n        totalEarningsINR: 0,\r\n        completedThisMonth: 0\r\n    });\r\n    const [recentActivity, setRecentActivity] = useState<ActivityItem[]>([]);\r\n    const { crisisAlerts, acceptCrisisSession, dismissAlert } = useTherapistCrisisAlerts();\r\n\r\n    // Fetch dashboard data\r\n    useEffect(() => {\r\n        fetchDashboardData();\r\n    }, []);\r\n\r\n    const fetchDashboardData = async () => {\r\n        // TODO: Replace with actual API calls\r\n        // Mock data for demonstration\r\n        const mockAppointments: Appointment[] = [\r\n            {\r\n                id: '1',\r\n                patientId: 'p1',\r\n                patientName: 'Rahul M.',\r\n                scheduledAt: new Date(Date.now() + 3600000), // 1 hour from now\r\n                durationMinutes: 50,\r\n                type: 'VIDEO_CALL',\r\n                status: 'CONFIRMED'\r\n            },\r\n            {\r\n                id: '2',\r\n                patientId: 'p2',\r\n                patientName: 'Priya S.',\r\n                scheduledAt: new Date(Date.now() + 7200000), // 2 hours\r\n                durationMinutes: 50,\r\n                type: 'VIDEO_CALL',\r\n                status: 'CONFIRMED'\r\n            },\r\n            {\r\n                id: '3',\r\n                patientId: 'p3',\r\n                patientName: 'Anonymous #4521',\r\n                scheduledAt: new Date(Date.now() + 14400000), // 4 hours\r\n                durationMinutes: 30,\r\n                type: 'CHAT_ONLY',\r\n                status: 'PENDING'\r\n            }\r\n        ];\r\n\r\n        const mockStats: DashboardStats = {\r\n            upcomingSessions: 5,\r\n            pendingMessages: 3,\r\n            totalEarningsINR: 45000,\r\n            completedThisMonth: 28\r\n        };\r\n\r\n        const mockActivity: ActivityItem[] = [\r\n            {\r\n                id: '1',\r\n                type: 'SESSION_COMPLETED',\r\n                description: 'Completed 50min session with Aditya K.',\r\n                timestamp: new Date(Date.now() - 3600000) // 1 hour ago\r\n            },\r\n            {\r\n                id: '2',\r\n                type: 'MESSAGE_SENT',\r\n                description: 'Replied to Neha P.\\'s message',\r\n                timestamp: new Date(Date.now() - 7200000) // 2 hours ago\r\n            },\r\n            {\r\n                id: '3',\r\n                type: 'APPOINTMENT_APPROVED',\r\n                description: 'Approved new booking from Rajesh T.',\r\n                timestamp: new Date(Date.now() - 10800000) // 3 hours ago\r\n            }\r\n        ];\r\n\r\n        setAppointments(mockAppointments);\r\n        setStats(mockStats);\r\n        setRecentActivity(mockActivity);\r\n    };\r\n\r\n    const formatTime = (date: Date) => {\r\n        return date.toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit' });\r\n    };\r\n\r\n    const formatRelativeTime = (date: Date) => {\r\n        const diff = Date.now() - date.getTime();\r\n        const minutes = Math.floor(diff / 60000);\r\n        const hours = Math.floor(minutes / 60);\r\n\r\n        if (minutes < 60) return `${minutes} mins ago`;\r\n        if (hours < 24) return `${hours} hours ago`;\r\n        return 'Yesterday';\r\n    };\r\n\r\n\r\n\r\n    const handleAcceptCrisis = (alertId: string) => {\r\n        acceptCrisisSession(alertId);\r\n        // TODO: Navigate to emergency session room\r\n    };\r\n\r\n    const getTodaysAppointments = () => {\r\n        const today = new Date();\r\n        today.setHours(0, 0, 0, 0);\r\n        const tomorrow = new Date(today);\r\n        tomorrow.setDate(tomorrow.getDate() + 1);\r\n\r\n        return appointments.filter(apt => {\r\n            const aptDate = new Date(apt.scheduledAt);\r\n            return aptDate >= today && aptDate < tomorrow;\r\n        });\r\n    };\r\n\r\n    const todaysAppointments = getTodaysAppointments();\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-neutral-50 p-6\">\r\n            <div className=\"max-w-7xl mx-auto space-y-6\">\r\n                {/* Header */}\r\n                <div className=\"mb-8\">\r\n                    <h1 className=\"text-4xl font-heading text-neutral-900 mb-2\">Dashboard</h1>\r\n                    <p className=\"text-neutral-600\">\r\n                        Welcome back, Dr. Sarah. {crisisAlerts.length > 0 && (\r\n                            <span className=\"text-danger-600 font-semibold\">\r\n                                You have {crisisAlerts.length} emergency alert{crisisAlerts.length > 1 ? 's' : ''} pending.\r\n                            </span>\r\n                        )}\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Crisis Alerts - Top Priority */}\r\n                {crisisAlerts.length > 0 && (\r\n                    <div className=\"space-y-4 mb-6\">\r\n                        {crisisAlerts.map((alert) => (\r\n                            <motion.div\r\n                                key={alert.id}\r\n                                className=\"bg-danger-50 border-2 border-danger-400 rounded-xl p-6 shadow-lg\"\r\n                                initial={{ opacity: 0, y: -20, scale: 0.95 }}\r\n                                animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                                transition={{ type: 'spring', stiffness: 300 }}\r\n                            >\r\n                                <div className=\"flex items-start justify-between\">\r\n                                    <div className=\"flex items-start gap-4 flex-1\">\r\n                                        <motion.div\r\n                                            className=\"p-3 bg-danger-200 rounded-full\"\r\n                                            animate={{ scale: [1, 1.1, 1] }}\r\n                                            transition={{ repeat: Infinity, duration: 1.5 }}\r\n                                        >\r\n                                            <AlertCircle className=\"w-8 h-8 text-danger-700\" />\r\n                                        </motion.div>\r\n                                        <div className=\"flex-1\">\r\n                                            <h3 className=\"text-xl font-heading text-danger-900 mb-2 flex items-center gap-2\">\r\n                                                ðŸš¨ Emergency Session Request\r\n                                                <span className=\"text-sm px-2 py-1 bg-danger-600 text-white rounded-full\">\r\n                                                    Crisis Level {alert.crisisLevel}/10\r\n                                                </span>\r\n                                            </h3>\r\n                                            <p className=\"text-danger-800 mb-4\">{alert.message}</p>\r\n                                            <p className=\"text-sm text-danger-700\">\r\n                                                User: {alert.userId} â€¢ {new Date(alert.timestamp).toLocaleString('en-IN')}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex gap-2\">\r\n                                        <button\r\n                                            onClick={() => handleAcceptCrisis(alert.id)}\r\n                                            className=\"px-4 py-2 bg-danger-600 text-white rounded-lg font-medium hover:bg-danger-700 transition-colors flex items-center gap-2\"\r\n                                        >\r\n                                            <Video className=\"w-4 h-4\" />\r\n                                            Accept & Join\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => dismissAlert(alert.id)}\r\n                                            className=\"px-4 py-2 bg-white text-danger-700 border border-danger-300 rounded-lg font-medium hover:bg-neutral-50 transition-colors\"\r\n                                        >\r\n                                            <XCircle className=\"w-4 h-4\" />\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </motion.div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n\r\n                {/* Stats Cards */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n                    <motion.div\r\n                        className=\"bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow\"\r\n                        whileHover={{ y: -4 }}\r\n                    >\r\n                        <div className=\"flex items-center justify-between mb-4\">\r\n                            <div className=\"p-3 bg-primary-100 rounded-lg\">\r\n                                <CalendarIcon className=\"w-6 h-6 text-primary-600\" />\r\n                            </div>\r\n                            <span className=\"text-2xl font-bold text-primary-600\">{stats.upcomingSessions}</span>\r\n                        </div>\r\n                        <h3 className=\"text-neutral-700 font-medium\">Upcoming Sessions</h3>\r\n                        <p className=\"text-sm text-neutral-500 mt-1\">Next 7 days</p>\r\n                    </motion.div>\r\n\r\n                    <motion.div\r\n                        className=\"bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow\"\r\n                        whileHover={{ y: -4 }}\r\n                    >\r\n                        <div className=\"flex items-center justify-between mb-4\">\r\n                            <div className=\"p-3 bg-secondary-100 rounded-lg\">\r\n                                <MessageSquare className=\"w-6 h-6 text-secondary-600\" />\r\n                            </div>\r\n                            <span className=\"text-2xl font-bold text-secondary-600\">{stats.pendingMessages}</span>\r\n                        </div>\r\n                        <h3 className=\"text-neutral-700 font-medium\">Pending Messages</h3>\r\n                        <p className=\"text-sm text-neutral-500 mt-1\">Unread chats</p>\r\n                    </motion.div>\r\n\r\n                    <motion.div\r\n                        className=\"bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow\"\r\n                        whileHover={{ y: -4 }}\r\n                    >\r\n                        <div className=\"flex items-center justify-between mb-4\">\r\n                            <div className=\"p-3 bg-green-100 rounded-lg\">\r\n                                <DollarSign className=\"w-6 h-6 text-green-600\" />\r\n                            </div>\r\n                            <span className=\"text-2xl font-bold text-green-600\">â‚¹{stats.totalEarningsINR.toLocaleString('en-IN')}</span>\r\n                        </div>\r\n                        <h3 className=\"text-neutral-700 font-medium\">Monthly Earnings</h3>\r\n                        <p className=\"text-sm text-neutral-500 mt-1\">This month</p>\r\n                    </motion.div>\r\n\r\n                    <motion.div\r\n                        className=\"bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow\"\r\n                        whileHover={{ y: -4 }}\r\n                    >\r\n                        <div className=\"flex items-center justify-between mb-4\">\r\n                            <div className=\"p-3 bg-primary-100 rounded-lg\">\r\n                                <CheckCircle className=\"w-6 h-6 text-primary-600\" />\r\n                            </div>\r\n                            <span className=\"text-2xl font-bold text-primary-600\">{stats.completedThisMonth}</span>\r\n                        </div>\r\n                        <h3 className=\"text-neutral-700 font-medium\">Completed Sessions</h3>\r\n                        <p className=\"text-sm text-neutral-500 mt-1\">This month</p>\r\n                    </motion.div>\r\n                </div>\r\n\r\n                {/* Main Content Grid */}\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                    {/* Today's Appointments */}\r\n                    <div className=\"lg:col-span-2 bg-white rounded-xl p-6 shadow-sm\">\r\n                        <div className=\"flex items-center justify-between mb-6\">\r\n                            <h2 className=\"text-2xl font-heading text-neutral-900\">Today's Appointments</h2>\r\n                            <button\r\n                                onClick={() => navigate('/therapist/appointments')}\r\n                                className=\"text-primary-600 hover:text-primary-700 font-medium text-sm\"\r\n                            >\r\n                                View All â†’\r\n                            </button>\r\n                        </div>\r\n\r\n                        {todaysAppointments.length === 0 ? (\r\n                            <div className=\"text-center py-12\">\r\n                                <CalendarIcon className=\"w-16 h-16 text-neutral-300 mx-auto mb-4\" />\r\n                                <p className=\"text-neutral-500\">No appointments scheduled for today</p>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"space-y-4\">\r\n                                {todaysAppointments.map((apt) => (\r\n                                    <div\r\n                                        key={apt.id}\r\n                                        className=\"flex items-center justify-between p-4 bg-neutral-50 rounded-lg hover:bg-neutral-100 transition-colors\"\r\n                                    >\r\n                                        <div className=\"flex items-center gap-4\">\r\n                                            <div className=\"p-3 bg-primary-100 rounded-lg\">\r\n                                                <Clock className=\"w-5 h-5 text-primary-600\" />\r\n                                            </div>\r\n                                            <div>\r\n                                                <h3 className=\"font-semibold text-neutral-900\">{apt.patientName}</h3>\r\n                                                <p className=\"text-sm text-neutral-600\">\r\n                                                    {formatTime(apt.scheduledAt)} â€¢ {apt.durationMinutes} min â€¢ {apt.type.replace('_', ' ')}\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            {apt.status === 'PENDING' && (\r\n                                                <span className=\"px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm font-medium\">\r\n                                                    Pending\r\n                                                </span>\r\n                                            )}\r\n                                            {apt.status === 'CONFIRMED' && (\r\n                                                <button\r\n                                                    onClick={() => navigate(`/session/${apt.id}`)}\r\n                                                    className=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center gap-2 font-medium\"\r\n                                                >\r\n                                                    <Video className=\"w-4 h-4\" />\r\n                                                    Join\r\n                                                </button>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Recent Activity */}\r\n                    <div className=\"bg-white rounded-xl p-6 shadow-sm\">\r\n                        <h2 className=\"text-2xl font-heading text-neutral-900 mb-6\">Recent Activity</h2>\r\n                        <div className=\"space-y-4\">\r\n                            {recentActivity.map((activity) => (\r\n                                <div key={activity.id} className=\"flex items-start gap-3\">\r\n                                    <div className=\"p-2 bg-neutral-100 rounded-lg\">\r\n                                        {activity.type === 'SESSION_COMPLETED' && <CheckCircle className=\"w-4 h-4 text-green-600\" />}\r\n                                        {activity.type === 'MESSAGE_SENT' && <MessageSquare className=\"w-4 h-4 text-primary-600\" />}\r\n                                        {activity.type === 'APPOINTMENT_APPROVED' && <CheckCircle className=\"w-4 h-4 text-primary-600\" />}\r\n                                    </div>\r\n                                    <div className=\"flex-1\">\r\n                                        <p className=\"text-sm text-neutral-900\">{activity.description}</p>\r\n                                        <p className=\"text-xs text-neutral-500 mt-1\">{formatRelativeTime(activity.timestamp)}</p>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Quick Actions */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                    <button\r\n                        onClick={() => navigate('/therapist/patients')}\r\n                        className=\"p-6 bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow text-left group\"\r\n                    >\r\n                        <Users className=\"w-8 h-8 text-primary-600 mb-3 group-hover:scale-110 transition-transform\" />\r\n                        <h3 className=\"font-semibold text-neutral-900 mb-1\">My Patients</h3>\r\n                        <p className=\"text-sm text-neutral-600\">View all active patients</p>\r\n                    </button>\r\n\r\n                    <button\r\n                        onClick={() => navigate('/therapist/messages')}\r\n                        className=\"p-6 bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow text-left group\"\r\n                    >\r\n                        <MessageSquare className=\"w-8 h-8 text-secondary-600 mb-3 group-hover:scale-110 transition-transform\" />\r\n                        <h3 className=\"font-semibold text-neutral-900 mb-1\">Messages</h3>\r\n                        <p className=\"text-sm text-neutral-600\">{stats.pendingMessages} unread messages</p>\r\n                    </button>\r\n\r\n                    <button\r\n                        onClick={() => navigate('/therapist/earnings')}\r\n                        className=\"p-6 bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow text-left group\"\r\n                    >\r\n                        <TrendingUp className=\"w-8 h-8 text-green-600 mb-3 group-hover:scale-110 transition-transform\" />\r\n                        <h3 className=\"font-semibold text-neutral-900 mb-1\">Earnings</h3>\r\n                        <p className=\"text-sm text-neutral-600\">View financial analytics</p>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\TherapistLoginPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\TherapistSignupPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\VideoSessionPage.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'initializeJitsi'. Either include it or remove the dependency array.","line":34,"column":8,"nodeType":"ArrayExpression","endLine":34,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [initializeJitsi]","fix":{"range":[1150,1152],"text":"[initializeJitsi]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport { ArrowLeft, Phone } from \"lucide-react\";\r\n\r\ndeclare global {\r\n    interface Window {\r\n        JitsiMeetExternalAPI: any;\r\n    }\r\n}\r\n\r\nexport const VideoSessionPage: React.FC = () => {\r\n    const { sessionId } = useParams<{ sessionId: string }>();\r\n    const { user } = useAuth();\r\n    const navigate = useNavigate();\r\n    const jitsiContainer = useRef<HTMLDivElement>(null);\r\n    const jitsiApi = useRef<any>(null);\r\n\r\n    useEffect(() => {\r\n        // Load Jitsi Meet API script\r\n        const script = document.createElement(\"script\");\r\n        script.src = \"https://meet.jit.si/external_api.js\";\r\n        script.async = true;\r\n        script.onload = () => initializeJitsi();\r\n        document.body.appendChild(script);\r\n\r\n        return () => {\r\n            // Cleanup: dispose Jitsi instance and remove script\r\n            if (jitsiApi.current) {\r\n                jitsiApi.current.dispose();\r\n            }\r\n            document.body.removeChild(script);\r\n        };\r\n    }, []);\r\n\r\n    const initializeJitsi = () => {\r\n        if (!jitsiContainer.current || !window.JitsiMeetExternalAPI) return;\r\n\r\n        const roomName = `serenity-session-${sessionId}`;\r\n        const domain = \"meet.jit.si\";\r\n\r\n        const options = {\r\n            roomName: roomName,\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            parentNode: jitsiContainer.current,\r\n            userInfo: {\r\n                displayName: user?.name || \"Guest User\"\r\n            },\r\n            configOverwrite: {\r\n                startWithAudioMuted: false,\r\n                startWithVideoMuted: false,\r\n                prejoinPageEnabled: false,\r\n                disableDeepLinking: true\r\n            },\r\n            interfaceConfigOverwrite: {\r\n                TOOLBAR_BUTTONS: [\r\n                    \"microphone\",\r\n                    \"camera\",\r\n                    \"closedcaptions\",\r\n                    \"desktop\",\r\n                    \"fullscreen\",\r\n                    \"fodeviceselection\",\r\n                    \"hangup\",\r\n                    \"chat\",\r\n                    \"recording\",\r\n                    \"settings\",\r\n                    \"raisehand\",\r\n                    \"videoquality\",\r\n                    \"tileview\",\r\n                    \"mute-everyone\"\r\n                ],\r\n                SHOW_JITSI_WATERMARK: false,\r\n                SHOW_WATERMARK_FOR_GUESTS: false\r\n            }\r\n        };\r\n\r\n        jitsiApi.current = new window.JitsiMeetExternalAPI(domain, options);\r\n\r\n        // Listen for when the user leaves the call\r\n        jitsiApi.current.addEventListener(\"readyToClose\", () => {\r\n            handleEndSession();\r\n        });\r\n    };\r\n\r\n    const handleEndSession = () => {\r\n        if (jitsiApi.current) {\r\n            jitsiApi.current.dispose();\r\n        }\r\n        // Navigate back based on user role\r\n        if (user?.role === \"therapist\") {\r\n            navigate(\"/therapist/dashboard\");\r\n        } else {\r\n            navigate(\"/dashboard\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"h-screen w-screen bg-neutral-900 flex flex-col\">\r\n            {/* Header */}\r\n            <div className=\"bg-neutral-800 px-6 py-4 flex items-center justify-between border-b border-neutral-700\">\r\n                <div className=\"flex items-center gap-4\">\r\n                    <button\r\n                        onClick={handleEndSession}\r\n                        className=\"p-2 hover:bg-neutral-700 rounded-lg transition-colors text-neutral-300 hover:text-white\"\r\n                        title=\"Leave Session\"\r\n                    >\r\n                        <ArrowLeft className=\"w-5 h-5\" />\r\n                    </button>\r\n                    <div>\r\n                        <h1 className=\"text-white font-semibold\">Therapy Session</h1>\r\n                        <p className=\"text-sm text-neutral-400\">Session ID: {sessionId}</p>\r\n                    </div>\r\n                </div>\r\n                <button\r\n                    onClick={handleEndSession}\r\n                    className=\"px-6 py-2 bg-danger-600 hover:bg-danger-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2\"\r\n                >\r\n                    <Phone className=\"w-4 h-4\" />\r\n                    End Session\r\n                </button>\r\n            </div>\r\n\r\n            {/* Jitsi Container */}\r\n            <div\r\n                ref={jitsiContainer}\r\n                className=\"flex-1 w-full\"\r\n                style={{ minHeight: 0 }}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\therapist\\EarningsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\therapist\\MessagesPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\therapist\\MyPatientsPage.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'patients.length'. Either include it or remove the dependency array.","line":68,"column":8,"nodeType":"ArrayExpression","endLine":68,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [patients.length]","fix":{"range":[3470,3472],"text":"[patients.length]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Calendar, MessageSquare, Eye, Clock } from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\ninterface Patient {\r\n    _id: string;\r\n    name: string;\r\n    email: string;\r\n    avatar?: string;\r\n    lastSession: string;\r\n    totalSessions: number;\r\n    // Mocked fields for UI\r\n    moodTrend?: 'Stable' | 'Fluctuating' | 'Declining';\r\n    moodColor?: string;\r\n}\r\n\r\nexport const MyPatientsPage: React.FC = () => {\r\n    const [patients, setPatients] = useState<Patient[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        const fetchPatients = async () => {\r\n            try {\r\n                const token = localStorage.getItem('token');\r\n                // Updated port to 3001\r\n                const response = await axios.get('http://localhost:3001/api/therapists/my-patients', {\r\n                    headers: { Authorization: `Bearer ${token}` }\r\n                });\r\n\r\n                // Enhance data with mock fields for the UI\r\n                const enhancedPatients = response.data.map((p: Patient, index: number) => {\r\n                    // Cyclic mock data based on index to ensure variety\r\n                    const trends: ('Stable' | 'Fluctuating' | 'Declining')[] = ['Stable', 'Fluctuating', 'Declining'];\r\n                    const trend = trends[index % 3];\r\n                    let color = 'text-green-500';\r\n                    if (trend === 'Fluctuating') color = 'text-yellow-500';\r\n                    if (trend === 'Declining') color = 'text-red-500';\r\n\r\n                    return {\r\n                        ...p,\r\n                        moodTrend: trend,\r\n                        moodColor: color\r\n                    };\r\n                });\r\n\r\n                setPatients(enhancedPatients);\r\n            } catch (error) {\r\n                console.error('Error fetching patients:', error);\r\n                // Fallback mock data if API fails or returns empty (for development visualization)\r\n                if (patients.length === 0) {\r\n                    setPatients([\r\n                        { _id: '1', name: 'Sarah Chen', email: 'sarah@example.com', lastSession: '2024-07-28', totalSessions: 5, moodTrend: 'Stable', moodColor: 'text-green-500' },\r\n                        { _id: '2', name: 'David Lee', email: 'david@example.com', lastSession: '2024-07-25', totalSessions: 8, moodTrend: 'Fluctuating', moodColor: 'text-yellow-500' },\r\n                        { _id: '3', name: 'Emily White', email: 'emily@example.com', lastSession: '2024-07-20', totalSessions: 3, moodTrend: 'Declining', moodColor: 'text-red-500' },\r\n                        { _id: '4', name: 'Michael Brown', email: 'michael@example.com', lastSession: '2024-07-27', totalSessions: 12, moodTrend: 'Stable', moodColor: 'text-green-500' },\r\n                        { _id: '5', name: 'Jessica Garcia', email: 'jessica@example.com', lastSession: '2024-07-23', totalSessions: 6, moodTrend: 'Fluctuating', moodColor: 'text-yellow-500' },\r\n                        { _id: '6', name: 'Chris Rodriguez', email: 'chris@example.com', lastSession: '2024-07-26', totalSessions: 9, moodTrend: 'Stable', moodColor: 'text-green-500' },\r\n                    ]);\r\n                }\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchPatients();\r\n    }, []);\r\n\r\n    if (loading) return <div className=\"p-8\">Loading patients...</div>;\r\n\r\n    return (\r\n        <div className=\"py-8 px-8 bg-gray-50 min-h-screen\">\r\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-8\">Patient Management</h1>\r\n            <div className=\"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n                {patients.map((patient) => (\r\n                    <div key={patient._id} className=\"bg-white rounded-xl shadow-sm p-6 hover:shadow-md transition-shadow duration-200\">\r\n                        {/* Profile Header */}\r\n                        <div className=\"flex items-center mb-4\">\r\n                            <img\r\n                                className=\"h-16 w-16 rounded-full object-cover\"\r\n                                src={patient.avatar || `https://ui-avatars.com/api/?name=${patient.name}&background=random`}\r\n                                alt={patient.name}\r\n                            />\r\n                            <div className=\"ml-4\">\r\n                                <h3 className=\"text-xl font-bold text-gray-900\">{patient.name}</h3>\r\n                                {/* Determine spacing or subtitle if needed, keeping it simple as per design */}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Mood Trend */}\r\n                        <div className=\"flex items-center mb-2\">\r\n                            <span className={`h-2.5 w-2.5 rounded-full mr-2 ${patient.moodColor?.replace('text-', 'bg-')}`}></span>\r\n                            <span className=\"text-sm text-gray-600\">\r\n                                Mood Trend: <span className=\"font-medium text-gray-900\">{patient.moodTrend}</span>\r\n                            </span>\r\n                        </div>\r\n\r\n                        {/* Last Session */}\r\n                        <div className=\"flex items-center mb-6 text-sm text-gray-500\">\r\n                            <Calendar className=\"h-4 w-4 mr-2\" />\r\n                            Last Session: {new Date(patient.lastSession).toLocaleDateString('en-CA')}\r\n                        </div>\r\n\r\n                        {/* Action Buttons */}\r\n                        <div className=\"space-y-3\">\r\n                            <button\r\n                                onClick={() => navigate(`/therapist/patients/${patient._id}`)}\r\n                                className=\"w-full flex items-center justify-center px-4 py-2 border border-gray-200 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors\"\r\n                            >\r\n                                <Eye className=\"h-4 w-4 mr-2\" />\r\n                                View Profile\r\n                            </button>\r\n\r\n                            <button className=\"w-full flex items-center justify-center px-4 py-2 bg-blue-400 hover:bg-blue-500 text-white rounded-lg text-sm font-medium transition-colors\">\r\n                                <MessageSquare className=\"h-4 w-4 mr-2\" />\r\n                                Chat\r\n                            </button>\r\n\r\n                            <button className=\"w-full flex items-center justify-center px-4 py-2 bg-[#9CAF88] hover:bg-[#8B9D77] text-white rounded-lg text-sm font-medium transition-colors\">\r\n                                <Clock className=\"h-4 w-4 mr-2\" />\r\n                                Schedule Follow-up\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\therapist\\PatientProfilePage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\therapist\\SessionPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\therapist\\SettingsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\therapist\\TherapistAppointmentsPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\therapist\\TherapistDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\pages\\therapist\\TherapistProfilePage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\services\\api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\types\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\src\\utils\\razorpay.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\Projects_\\Hackathon\\Nxvwave Buildathon\\NXT-WAVE-HACKTHON-TEAM-VISHWAMITRA\\frontend\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]